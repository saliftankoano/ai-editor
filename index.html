<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <script>
        var require = {
            paths: {
                "vs": "./vendor/monaco-editor-0.44.0/min/vs"
            }
        };
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/golden-layout/1.5.9/goldenlayout.min.js" integrity="sha256-NhJAZDfGgv4PiB+GVlSrPdh3uc75XXYSM4su8hgTchI=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/golden-layout/1.5.9/css/goldenlayout-base.css" integrity="sha512-rGtzJyDE8egZ/OScuBNLW1EIhRydcfrZo14oTvZwRLzEZu+s8foCtwi0XhXsKnhuoQAwJ7POFARWdU4fBL7FbQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <link id="judge0-golden-layout-light-theme-stylesheet" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/golden-layout/1.5.9/css/goldenlayout-light-theme.css" integrity="sha512-/S3N+v8cRHW2GJvM3v9FGHAKOhNgws+V1dYZb1fBxRd9XIwpqZFZB0jug+2HHf64eURsJLqVzCVn92pQTFHHow==" crossorigin="anonymous" referrerpolicy="no-referrer" disabled>
    <link id="judge0-golden-layout-dark-theme-stylesheet" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/golden-layout/1.5.9/css/goldenlayout-dark-theme.css" integrity="sha512-XfcBrEH69BhsZ0XpvPyzOLgikhAvIG6Znbi6yKi1Jh1iYaOXSXvljWFerhcUl5LYLCuV61KhfCydQ1+MNxnilg==" crossorigin="anonymous" referrerpolicy="no-referrer">

    <script src="./vendor/monaco-editor-0.44.0/min/vs/loader.js"></script>
    <script src="./vendor/monaco-editor-0.44.0/min/vs/editor/editor.main.nls.js"></script>
    <script src="./vendor/monaco-editor-0.44.0/min/vs/editor/editor.main.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.css" integrity="sha512-KXol4x3sVoO+8ZsWPFI/r5KBVB/ssCGB5tsv2nVOKwLg33wTFP3fmnXa47FdSVIshVTgsYk/1734xSk9aFIa4A==" crossorigin="anonymous" referrerpolicy="no-referrer">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.5.0/semantic.min.js" integrity="sha512-Xo0Jh8MsOn72LGV8kU5LsclG7SUzJsWGhXbWcYs2MAmChkQzwiW/yTQwdJ8w6UA9C6EVG18GHb/TrYpYCjyAQw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!-- Add marked and highlight.js before other application scripts -->
    <script src="https://cdn.jsdelivr.net/npm/marked@11.1.1/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <script>
      // Initialize highlight.js
      hljs.configure({
        ignoreUnescapedHTML: true
      });
    </script>
    <script type="module" src="js/electron.js"></script>
    <script type="module" src="js/ide.js"></script>
    <script type="module" src="js/local_storage.js"></script>
    <script type="module" src="js/puter.js"></script>
    <script type="module" src="js/query.js"></script>
    <script type="module" src="js/style.js"></script>
    <script type="module" src="js/theme.js"></script>

    <link type="text/css" rel="stylesheet" href="css/ide.css">
    <link type="text/css" rel="stylesheet" href="css/site.css">
    <link rel="stylesheet" href="css/chat.css">

    <title>Judge0 IDE</title>
    <meta name="title" content="Judge0 IDE">
    <meta name="description" content="Free and open-source online code editor and compiler">
    <meta name="author" content="Judge0 d.o.o.">
    <meta name="keywords" content="online editor, online code editor, online ide, online compiler, online interpreter, run code online, learn programming online,
    online debugger, programming in browser, online code runner, online code execution, debug online, debug C code online, debug C++ code online,
    programming online, snippet, snippets, code snippet, code snippets, pastebin, execute code, programming in browser, run c online, run C++ online,
    run java online, run python online, run ruby online, run c# online, run rust online, run pascal online, run basic online">

    <meta property="og:url" content="https://ide.judge0.com">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Judge0 IDE">
    <meta property="og:image" content="https://raw.githubusercontent.com/judge0/ide/refs/heads/master/.github/wallpaper.png">
    <meta property="og:image:alt" content="Judge0 IDE">
    <meta property="og:description" content="Free and open-source online code editor and compiler">
    <meta property="og:site_name" content="Judge0 IDE">
    <meta property="og:locale" content="en_US">

    <meta property="twitter:url" content="https://ide.judge0.com">
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Judge0 IDE">
    <meta property="twitter:image" content="https://raw.githubusercontent.com/judge0/ide/refs/heads/master/.github/wallpaper.png">
    <meta property="twitter:description" content="Free and open-source online code editor and compiler">

    <link rel="shortcut icon" href="/favicons/favicon.ico">

    <link rel="icon" type="image/svg+xml" href="/favicons/favicon.svg">
    <link rel="icon" type="image/png" sizes="96x96" href="/favicons/favicon-96x96.png">

    <link rel="apple-touch-icon" sizes="180x180" href="/favicons/favicon-180x180.png">
    <meta name="apple-mobile-web-app-title" content="Judge0 IDE">

    <link rel="manifest" href="/manifest.json">

    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="theme-color" content="#ffffff">

    <!-- Load our scripts with defer -->
    <script>
        console.log("Testing console output");
    </script>
    
    <!-- Load agent.mjs first and expose it globally -->
    <script type="module">
        import { createAgent, stopAgent } from "./js/agent.mjs";
        // Expose agent functions globally
        window.mentorAgent = { createAgent, stopAgent };
        console.log("Agent functions exposed:", window.mentorAgent);
    </script>

    <!-- Load mentor UI directly -->
    <script>
        // Wait for agent to be available
        function waitForAgent() {
            return new Promise((resolve) => {
                if (window.mentorAgent) {
                    resolve(window.mentorAgent);
                } else {
                    const check = () => {
                        if (window.mentorAgent) {
                            resolve(window.mentorAgent);
                        } else {
                            setTimeout(check, 100);
                        }
                    };
                    check();
                }
            });
        }

        const DEBUG = true;
        function debug(...args) {
            if (DEBUG) console.log("[Mentor UI]", ...args);
        }

        // Handle UI interactions
        window.mentorSession = null;

        async function startMentorSession() {
            try {
                debug("Starting mentor session...");
                const agent = await waitForAgent();
                const session = await agent.createAgent();
                debug("Agent created successfully:", session);
                return session;
            } catch (error) {
                console.error("Error creating agent:", error);
                throw error;
            }
        }

        async function endMentorSession(session) {
            if (session) {
                try {
                    debug("Ending mentor session...");
                    const agent = await waitForAgent();
                    await agent.stopAgent();
                    debug("Session ended successfully");
                } catch (error) {
                    console.error("Error stopping session:", error);
                    throw error;
                }
            }
        }

        async function toggleMentorSession() {
            debug("Toggle mentor session called");
            const fab = document.querySelector("#mentor-fab button");
            const statusText = document.querySelector(".mentor-status");

            if (!window.mentorSession) {
                debug("Attempting to start session...");
                fab.classList.add("active");
                statusText.textContent = "Starting mentoring session...";

                try {
                    window.mentorSession = await startMentorSession();
                    statusText.textContent = "Mentoring session active";
                    debug("Mentor session started successfully:", window.mentorSession);
                } catch (error) {
                    console.error("Failed to start mentor session:", error);
                    fab.classList.remove("active");
                    statusText.textContent = "Failed to start session. Try again.";
                    window.mentorSession = null;
                }
            } else {
                debug("Attempting to end session...");
                statusText.textContent = "Ending session...";

                try {
                    await endMentorSession(window.mentorSession);
                    window.mentorSession = null;
                    fab.classList.remove("active");
                    statusText.textContent = "Click to start mentoring session";
                    debug("Mentor session ended successfully");
                } catch (error) {
                    console.error("Failed to end mentor session:", error);
                    statusText.textContent = "Error ending session. Try again.";
                }
            }
        }

        // Initialize when DOM is ready
        document.addEventListener("DOMContentLoaded", () => {
            debug("Initializing FAB...");
            const fab = document.querySelector("#mentor-fab button");
            
            if (fab) {
                debug("Found FAB, adding click handler");
                fab.addEventListener("click", async (e) => {
                    debug("FAB clicked!");
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Visual feedback
                    fab.style.opacity = "0.7";
                    setTimeout(() => fab.style.opacity = "1", 200);
                    
                    try {
                        await toggleMentorSession();
                    } catch (error) {
                        console.error("Error in click handler:", error);
                    }
                });
                debug("Click handler added");
            } else {
                console.error("FAB not found");
            }
        });

        // Export for debugging
        window.debugMentorUI = {
            toggleMentorSession,
            debug,
            getState: () => ({
                mentorSession: window.mentorSession,
                fab: document.querySelector("#mentor-fab button"),
                statusText: document.querySelector(".mentor-status")
            })
        };
    </script>
</head>

<body>
    <div id="judge0-site-navigation" class="ui top fixed borderless menu">
        <a id="judge0-header" href="https://judge0.com" target="_blank" class="header item judge0-minimal-hidden judge0-standalone-hidden judge0-electron-hidden">
            <img id="judge0-logo" src="./images/icon_var2_rounded_512.png">
        </a>
        <div class="ui simple dropdown item">
            <span class="text">File</span>
            <i class="dropdown icon"></i>
            <div class="menu judge0-file-menu">
                <div id="judge0-open-file-btn" class="item">
                    <span class="description">+O</span>
                    <span class="text">Open File...</span>
                    <input type="file" id="open-file-input" style="display: none;">
                </div>
                <div id="judge0-save-btn" class="item">
                    <span class="description">+S</span>
                    <span class="text">Save</span>
                </div>
            </div>
        </div>
        <div class="ui simple dropdown item">
            <span class="text">Help</span>
            <i class="dropdown icon"></i>
            <div class="menu judge0-file-menu">
                <a href="PRIVACY.md" class="link text item" target="_blank">Privacy Policy</a>
                <a href="TERMS.md" class="link text item" target="_blank">Terms of Service</a>
            </div>
        </div>
        <div class="item">
            <div class="ui input">
                <select id="select-language" class="ui search selection dropdown"></select>
            </div>
        </div>
        <div class="item">
            <div class="ui left icon transparent input">
                <i class="flag icon"></i>
                <input id="compiler-options" type="text" placeholder="Compiler options"></input>
            </div>
        </div>
        <div class="item">
            <div class="ui left icon transparent input">
                <i class="terminal icon"></i>
                <input id="command-line-arguments" type="text" placeholder="Command line arguments"></input>
            </div>
        </div>
        <div class="item">
            <button id="run-btn" class="ui primary labeled icon button" data-content="+↵" data-position="bottom center">
                <i class="play icon"></i>Run Code
            </button>
        </div>
        <div class="right menu">
            <div id="judge0-theme-toggle-btn" class="icon link item" data-content="">
                <i id="judge0-theme-toggle-btn-icon" class="sun icon"></i>
            </div>
            <a class="icon item judge0-minimal-hidden judge0-electron-hidden" href="https://platform.sulu.sh/apis/judge0" target="_blank" data-content="API Docs">
                <i class="book icon"></i>
            </a>
            <a class="icon item judge0-minimal-hidden judge0-electron-hidden" href="https://github.com/judge0/ide/tree/master/embed" target="_blank" data-content="Embed">
                <i class="code icon"></i>
            </a>
            <a class="icon item judge0-minimal-hidden judge0-electron-hidden" href="https://github.com/judge0/ide" target="_blank" data-content="GitHub Repository">
                <i class="github icon"></i>
            </a>
        </div>
    </div>

    <div id="judge0-site-content"></div>

    <div id="judge0-site-modal" class="ui modal">
        <div class="header">
            <span id="title"></span>
        </div>
        <div class="scrolling content"></div>
        <div class="actions">
            <a id="report-problem-btn" class="ui labeled icon red button" href="https://github.com/judge0/ide/issues/new?title=New+bug+report&body=Describe+the+problem." target="_blank">
                <i class="flag icon"></i>
                Report Problem
            </a>
            <div class="ui labeled icon cancel secondary button">
                <i class="close icon"></i>
                Close (ESC)
            </div>
        </div>
    </div>

    <div id="judge0-status-line" class="ui bottom right attached label"></div>

    <!-- <i class="copyright outline icon"></i>2016-2025 Judge0 d.o.o. – All Rights Reserved. -->
    <script>
        if ("serviceWorker" in navigator) {
            navigator.serviceWorker.register("sw.js").then(() => console.log("Service Worker Registered"));
        }
    </script>

    <div id="code-change-controls" class="code-change-controls" style="display: none;">
        <span class="change-type modify-label">Modified</span>
        <button class="accept-change" onclick="window.acceptChange()">✓</button>
        <button class="reject-change" onclick="window.rejectChange()">✗</button>
    </div>

    <!-- Replace the existing FAB HTML -->
    <div id="mentor-fab" class="mentor-fab">
        <button class="ui circular icon button massive" type="button">
            <i class="microphone icon"></i>
        </button>
        <div class="mentor-status">Click to start recording</div>
    </div>
</body>
</html>
